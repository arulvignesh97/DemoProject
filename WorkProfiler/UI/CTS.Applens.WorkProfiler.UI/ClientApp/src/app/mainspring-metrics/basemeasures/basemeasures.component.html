<div id="baseMeasuregrid">
   <p-toolbar styleClass="p-mb-1 bg-white inherit-back toolbar-padding border-0">
    <ng-template pTemplate="left">
        <h6 class="p-mb-0 text-dark p-1">{{'BaseMeasures'|translate}}</h6>
    </ng-template>        
</p-toolbar>
<div class="bg-white h-80 pt-1 pl-1 pr-1 pb-0">
  <div *ngIf="divBaseNoteSummary" id="divBaseNoteSummary" role="alert" class="alert alert-info row alertrow pt-0" style="height:50px">
          
    <p class="mb-0 col-md-6 ft-12 pt-2" [ngClass]="{'col-md-11': (!divBaseNoteSummaryCircle && !progresstile && !LoadfactorCircle)|| displayExemptedMsg}" *ngIf="notes">
      {{'ManualBaseMeasureentryforcurrentmonthwillgetfreezedon4thcalendardayofnextmonth'|translate}}
    </p>
    <p class="mb-0 col-md-6 ft-12 pt-2" [ngClass]="{'col-md-11': (!divBaseNoteSummaryCircle && !progresstile && !LoadfactorCircle) || displayExemptedMsg}" *ngIf="OdcNotes">
      {{'BaseMeasureentryforcurrentmonthwillbefreezedon4thcalendardayofnextmonth'|translate}}
    </p>
      
      <div class="errorsuccessmsgbodywidth pl-0 col-md-3 " [ngClass]="{'max-20':LoadfactorCircle,'max-25':!LoadfactorCircle}" *ngIf="divBaseNoteSummaryCircle && !displayExemptedMsg" >
       <ul class="nav show counts" [ngClass]="{'hide': !countClicked}">
        <li class="nav-item mr-2">
        <span>
          {{'TotalCount' | translate}}
          <p class="text-center count-text ft-18" [ngClass]="{'base-measure-greater-70-count': progressPercentage >= 70, 'base-measure-greater-50-count': (progressPercentage >= 50 && progressPercentage < 70), 'base-measure-greater-0-count': (progressPercentage >= 0 && progressPercentage < 50)}" >
           {{totalCount}}
          </p>
        </span>
      </li>
      <li class="nav-item">
        <span>
          {{'CompletedCount' | translate}}
          <p class="text-center count-text ft-18" [ngClass]="{'base-measure-greater-70-count': progressPercentage >= 70, 'base-measure-greater-50-count': (progressPercentage >= 50 && progressPercentage < 70), 'base-measure-greater-0-count': (progressPercentage >= 0 && progressPercentage < 50)}">
            {{completedCount}}
          </p>
        </span>
      </li>
      </ul>
      </div>
      <div class="errorsuccessmsgbodywidth pl-3 pad-10 col-md-1 edit-count" title="{{'CurrentWeekstatus' | translate}}" 
      *ngIf="divBaseNoteSummaryCircle && !displayExemptedMsg" (click)="toggleCount()">      
        <span  class="fa-stack fa-1x">
          <i class="fa fa-circle fa-stack-2x icon-background" style="color: #4cabea;"></i>
          <i [ngClass]="toggleIcon" class="fa fa-stack-1x" style="
          color: white;font-size: 20px;
      "></i></span>
      </div>
      <div *ngIf="LoadfactorCircle && !displayExemptedMsg" title="{{'EnterLoadFactor' | translate}}"  (click)="loadFactorPopup(true)"
       class="errorsuccessmsgbodywidth pad-10 col-md-1 edit-count">        
        <span  class="fa-stack fa-1x">
          <i class="fa fa-circle fa-stack-2x icon-background" style="color: #4cabea;"></i>
          <i class="fa fa-pencil-square-o fa-stack-1x" style="
          color: white;
          margin-left: 1px;
      "></i></span>
      </div>
      <div id="progress" class="w-20 pl-2 errorsuccessmsgbodywidth pad-13 col-md-2" *ngIf="progresstile && !displayExemptedMsg">
        <p-progressBar [ngClass]="{'base-measure-greater-70': progressPercentage >= 70, 'base-measure-greater-50': (progressPercentage >= 50 && progressPercentage < 70), 'base-measure-greater-0': (progressPercentage >= 0 && progressPercentage < 50)}" [value]="progressPercentage"></p-progressBar>
      </div>
      <div class="errorsuccessmsgbodywidth pad-13 col-md-1 edit-count" [ngStyle]="{'width': LoadfactorCircle ? '4.5%' : '7.5%' }">
        <i class="fa fa-search" (click)="loadsearchBaseMeasurePopup(true)" data-target="#BaseMeasure" style="float: right;padding-right: 8px;font-size:21px;cursor:pointer;color:#4cabea;" title="{{'Search'|translate}}"></i>
      </div> 

  </div>
  
  <div class="row alert alert-warning" *ngIf="divMainspringBaseMeasureMarquee" id="divMainspringBaseMeasureMarquee" style="height: 50px;margin-left:2px;margin-top: 5px;width:100%">
    <!-- <div>
      <div class="faiconwarning">
        <i class="fa fa-circle faiconcircle">
        </i>
        <i class="fa fa-warning faiconwidth">
        </i>
      </div>
    </div> -->
    <p class="mb-0 col-md-11 ft-12 warn">
      {{'ChosenProjectisnotconfiguredinMainspring'|translate}}
    </p>
    
    <div class="col-md-1">
      <i class="fa fa-search" (click)="loadsearchBaseMeasurePopup(true)" data-target="#BaseMeasure" style="float: right;padding-right: 8px;font-size:21px;cursor:pointer;color:#ed8c01;" title="Search" data-lang-title="Search" data-backdrop="static" data-keyboard="false"></i>
    </div>
  </div>
  <div class="alert alert-danger mt-1 pt-1 pb-2" role="alert" *ngIf="ddexempted">                
    <p class="mb-0">{{exemptedMsg}}</p>
  </div> 
  <div class="alert alert-danger mt-1 pt-1 pb-2" role="alert" *ngIf="isError && !displayExemptedMsg">                
    <p class="mb-0">{{errorMessage}}</p>
  </div>
  <div class="alert alert-success mt-1 pt-1 pb-2" role="alert" *ngIf="isSuccess">               
    <p class="mb-0">{{successMessage}}</p>
  </div>
  <div class="mt-2">
  <div *ngIf="divgrdBaseMeasures && !displayExemptedMsg" id="divBaseMeasureGrid">
    <div id="divgrdBaseMeasures">
      <app-basemeasure-userdefined [basemeasures]="basemeasuresUserDefinedModel"></app-basemeasure-userdefined>
    </div>
  </div>
  <div *ngIf="divgrdBaseMeasuresODC && !displayExemptedMsg" id="divBaseMeasureODCGrid">
    <div id="divgrdBaseMeasuresODC">
      <app-basemeasure-odc-restricted [basemeasures]="basemeasuresOdcModel"></app-basemeasure-odc-restricted>
    </div>
  </div>
  <div *ngIf="divgrdTicketSummaryODC && !displayExemptedMsg" id="divBaseMeasureTicketSummaryODCGrid">
    <div id="divgrdTicketSummaryODC">
      <app-ticket-summary-odc [basemeasures]="basemeasureTicketSummaryOdc"></app-ticket-summary-odc>
    </div>
  </div>
</div>
  <div class="alert alert-danger alert-dismissible" *ngIf="erroralert" id="error-alert" role="alert" style="display:none;text-align:center; height:auto; padding: 5px !important; margin-bottom: 0px !important;">
    <div>{{'Definevaluesformandatedfiltertoseetheresults'|translate}}</div>
  </div>
  <p-dialog id="searchpopup" [(visible)]="loadsearchbase" header="{{'SearchBaseMeasureDetails'|translate}}" [style]="{width: '60%'}"
            [modal]="true" styleClass="p-fluid" [draggable]="false">
    <ng-template pTemplate="content" #template>
      <div id="topfiltersMps" *ngIf="topfiltersMps">
        <div class="row" style="display:none">
          <div class="col-md-4">
            <div class="radio">
              <label>
                <input type="radio" name="optionsRadios" id="rbUserDefined" value="Y" checked="checked" data-lang="ManualMeasure">
                {{'ManualMeasure'|translate}}
              </label>
            </div>
          </div>
          <div class="col-md-6">
            <div class="radio">
              <label>
                <input type="radio" name="optionsRadios" id="rbSystemDefined" value="N" data-lang="ComputedMeasure(BasedonTicketSummary)">
                {{'ComputedMeasure(BasedonTicketSummary)'|translate}}
              </label>
            </div>
          </div>

        </div>
        <div id="ODCRadiobtn" *ngIf="odcRadiobtn">
          <div class="row">
            <div class="col-md-4">
              <div class="radio">
                <label>
                  <input type="radio" name="manualradio" id="rbBaseMeasure" value="Y" (ngModelChange)="odcradioChange('Y')" [(ngModel)]="rbBaseMeasurechk">
                  <!-- <p-radioButton name="manualradio" value="Y" [(ngModel)]="rbBaseMeasurechk" (onClick)="odcradioChange('Y')"></p-radioButton> -->
                {{'ManualBaseMeasure'|translate}}</label>
              </div>
            </div>
            <div class="col-md-6">
              <div class="radio">
                <label>
                  <input type="radio" name="manualradio" value="N" id="rbTicketSummary" (ngModelChange)="odcradioChange('N')" [(ngModel)]="rbTicketSummarychk">
                  <!-- <p-radioButton name="manualradio" value="N" [(ngModel)]="rbTicketSummarychk" (onClick)="odcradioChange('N')"></p-radioButton> -->
                {{'TicketSummaryBaseMeasure'|translate}}</label>
              </div>
            </div>

          </div>
        </div>
        <div class="row">
          <div id="alert" class="alert alert-danger warningMessage margintop" 
            *ngIf="displayExemptedMsg" [innerHtml]="exemptedMsg"></div>
          <div class="col-md-3" id="projectdropdown">
            <label><span id="mandatory">*</span> {{'Project'|translate}}</label>
            <p-dropdown appendTo="body" styleClass="search-filter-project" [options]="projects" [(ngModel)]="selectedProjects"
                        emptyFilterMessage="No projects Found" placeholder="Select Project" (onChange)="projectChange(selectedProjects)"></p-dropdown>
            <input type="hidden" id="hdnODC" value="" />
          </div>
          <div class="col-md-3" id="Frequency" *ngIf="frequency">
            <label><span id="mandatory">*</span>{{'Frequencyy'|translate}}</label>
            <p-dropdown appendTo="body" styleClass="search-filter-project" [options]="ddlfrequency" [(ngModel)]="selectedfrequency"
                        emptyFilterMessage="No frequency found" placeholder="Select Frequency"></p-dropdown>

            <!--<select class="form-control" id="ddlfrequency"></select>-->
          </div>
          <div class="col-md-3" id="ReportingPeriod" *ngIf="reportingPeriod">
            <label><span id="mandatory">*</span>{{'ReportingPeriodd'|translate}}</label>
            <p-dropdown appendTo="body" styleClass="search-filter-project" [options]="ddlReportingPeriod"
                        [(ngModel)]="selectedReportingPeriod" emptyFilterMessage="No reporting period found" placeholder="Reporting Period"></p-dropdown>
            <!--<select class="form-control" id="ddlReportingPeriod"></select>-->
          </div>
          <div class="col-md-3" id="Services" *ngIf="services">
            <label><span id="mandatory">*</span>{{'Servicess'|translate}}</label>
            <!--<select class="form-control" name="Service" id="ddlservice" multiple="multiple"></select>-->
            <!--<p-dropdown styleClass="search-filter-project" [options]="ddlservice" optionLabel="ServicesName" [(ngModel)]="selectedddlservice" emptyFilterMessage="No Services found" placeholder="Services"></p-dropdown>-->
            <p-multiSelect [options]="ddlservice" (onChange)="ddlservicechange()"
                            styleClass="base-measure-multi"
                           [(ngModel)]="selectedddlservice"
                           appendTo="body"
                           maxSelectedLabels="1" [resetFilterOnHide]="true" placeholder="Select Options" [filter]="true">
            </p-multiSelect>

          </div>

        </div>
        <div class="row mt-1">
          <div class="col-md-3" id="divMetrics" *ngIf="divMetrics">
            <label><span id="mandatory">*</span>{{'Metrics'|translate}}</label>
            <!--<select class="form-control" name="metrics" id="ddlmetrics" multiple="multiple"></select>-->
            <!--<p-dropdown styleClass="search-filter-project" [options]="ddlmetrics" optionLabel="MetricsName" [(ngModel)]="selectedddlmetrics" emptyFilterMessage="No Metrics found" placeholder="Metrics"></p-dropdown>-->
            <p-multiSelect [options]="ddlmetrics" (onChange)="ddlmetricschange()"
                            styleClass="base-measure-multi"
                            appendTo="body"
                           [(ngModel)]="selectedddlmetrics"
                           maxSelectedLabels="1" [resetFilterOnHide]="true" [filter]="true" placeholder="Select Options">
            </p-multiSelect>

          </div>
          <div class="col-md-9"></div>

        </div>
      </div>
      <div class="row" id="btnRow" *ngIf="btnRow">
        <div class="col-md-2" style="margin-left: 3px;max-width: 12% !important;">
          <button type="button" title="Search" id="btnSearchBaseMeasures" [disabled]="displayExemptedMsg"
          (click)="MpsMetricsSearchBtn()" style="margin-left:10px;margin-top:20px">
            {{'Search'|translate}}
          </button>
        </div>
        <div class="col-md-2">
          <button id="btnExportToExcel" title="Export to Excel" style="display:none">
            {{'Export'|translate}}
          </button>
        </div>
      </div>
    </ng-template>
  </p-dialog>
  <p-dialog [(visible)]="loadFactorDialog" header="Load Factor" [style]="{width: '30%'}"
            [modal]="true" styleClass="p-fluid" [draggable]="false">
    <ng-template pTemplate="content" #template>
      <div class="alert alert-danger mt-1 pt-2 pb-2" role="alert" *ngIf="isFactorError">                
        <p class="mb-0">{{errorMessage}}</p>
      </div>
      <div class="row">
        <div class="col-md-6">
          <label class="clsLabel"><span id="mandatory">*</span>{{'EnterLoadFactor'|translate}}</label>
        </div>
        <div class="col-md-6">
          <input pInputText id="txtLoadfactor" [(ngModel)]="loadFactor" placeholder="" class="form-control" (keypress)="numberOnly($event)">
        </div>
      </div>
      <div class="row">
        <div class="col-md-8"></div>
        <div class="col-md-2">
          <button type="button" id="btnLoadFactor" (click)="SaveLoadFactor()" style="margin-left:10px;margin-top:20px">
            {{'Save'|translate}}
          </button>
        </div>
      </div>
    </ng-template>
  </p-dialog>
</div>

</div>
